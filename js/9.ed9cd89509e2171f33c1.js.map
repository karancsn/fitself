{"version":3,"file":"js/9.ed9cd89509e2171f33c1.js","mappings":"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","sources":["webpack://fitself/./src/ts/accUtils.ts","webpack://fitself/./src/ts/interfaces.ts","webpack://fitself/./src/ts/viewModels/order.ts"],"sourcesContent":["define([\"require\", \"exports\"], function (require, exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.announce = void 0;\n    let validAriaLiveValues = [\"off\", \"polite\", \"assertive\"];\n    function announce(message, manner) {\n        if (manner === undefined || validAriaLiveValues.indexOf(manner) === -1) {\n            manner = \"polite\";\n        }\n        let params = {\n            \"bubbles\": true,\n            \"detail\": { \"message\": message, \"manner\": manner }\n        };\n        let globalBodyElement = document.getElementById(\"globalBody\");\n        globalBodyElement.dispatchEvent(new CustomEvent(\"announce\", params));\n    }\n    exports.announce = announce;\n});\n","define([\"require\", \"exports\"], function (require, exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.ProductCategory = void 0;\n    class ProductCategory {\n        constructor(category) {\n            this.category = category;\n            this.sku = category;\n            this.products = [];\n        }\n        add(item) {\n            this.products.push(item);\n        }\n    }\n    exports.ProductCategory = ProductCategory;\n});\n","var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\ndefine([\"require\", \"exports\", \"knockout\", \"ojs/ojconverter-number\", \"ojs/ojmodel\", \"ojs/ojkeyset\", \"ojs/ojarraytreedataprovider\", \"ojs/ojcollectiondataprovider\", \"../accUtils\", \"../interfaces\", \"../../resources/data.json\", \"ojs/ojbutton\", \"ojs/ojinputnumber\", \"ojs/ojinputtext\", \"ojs/ojlistitemlayout\", \"ojs/ojlistview\", \"ojs/ojtable\"], function (require, exports, ko, ojconverter_number_1, ojmodel_1, ojkeyset_1, ArrayTreeDataProvider, CollectionDataProvider, AccUtils, interfaces_1, data_json_1) {\n    \"use strict\";\n    ko = __importStar(ko);\n    AccUtils = __importStar(AccUtils);\n    data_json_1 = __importDefault(data_json_1);\n    class Product {\n        constructor(productData) {\n            this.sku = productData.sku;\n            this.name = productData.name;\n            this.flavour = productData.flavour;\n            this.quantity = productData.quantity;\n            this.unit = productData.unit;\n            this.packSize = productData.packSize;\n            this.volumePoints = productData.volumePoints;\n            this.mrp = productData.mrp;\n            this.price15 = productData.price15;\n            this.price25 = productData.price25;\n            this.price35 = productData.price35;\n            this.price42 = productData.price42;\n            this.price50 = productData.price50;\n            this.inCartCount = ko.observable(0);\n        }\n    }\n    class OrderViewModel {\n        constructor(args) {\n            this.handleInputNumber = (event, data) => {\n                if (0 === event.detail.value) {\n                    this.cartProdItems.remove((item) => {\n                        return item.sku === data.key;\n                    });\n                }\n            };\n            this.handleRawValueChanged = (event) => {\n                let filter = event.detail.value;\n                if (filter.length === 0) {\n                    if (this.dataProvider() == this.filteredDataProvider) {\n                        this.dataProvider(this.prodDataProvider);\n                    }\n                }\n                else {\n                    if (this.filteredDataProvider == undefined) {\n                        this.collection = this.flattenJSON(this.productCatalogue());\n                        this.filteredCollection = this.collection.clone();\n                        this.filteredDataProvider = new CollectionDataProvider(this.filteredCollection);\n                    }\n                    if ((!this.collection) || (!this.filteredCollection)) {\n                        return;\n                    }\n                    let ret = this.collection.where({ name: { value: filter, comparator: this.nameFilter } });\n                    this.filteredCollection.reset(ret);\n                    if (this.dataProvider() == this.prodDataProvider) {\n                        this.dataProvider(this.filteredDataProvider);\n                    }\n                }\n            };\n            this.addToCart = (event, data, context) => {\n                if (!data || !data.data) {\n                    return;\n                }\n                this.cartProdItems.remove((item) => {\n                    return item.sku === data.data.sku;\n                });\n                data.data.inCartCount(data.data.inCartCount() + 1);\n                this.cartProdItems.push(data.data);\n            };\n            this.checkout = (event, data, context) => {\n                this.args.router.go({ path: 'cart' });\n            };\n            this.prepareListData = (response) => {\n                this.effectiveDate(response.effectiveDate);\n                let tempArray = [];\n                for (let categorySet of response.items) {\n                    let productSet = new interfaces_1.ProductCategory(categorySet.category);\n                    for (let product of categorySet.products) {\n                        productSet.add(new Product(product));\n                    }\n                    tempArray.push(productSet);\n                }\n                this.productCatalogue(tempArray);\n            };\n            this.emptyCart = (event) => {\n                this.cartProdItems.removeAll();\n                this.productCatalogue().forEach(category => {\n                    category.products.forEach(prod => {\n                        prod.inCartCount(0);\n                    });\n                });\n                return true;\n            };\n            this.args = args;\n            this.headerConfig = ko.observable({ \"view\": [], \"viewModel\": null });\n            this.footerConfig = ko.observable({ \"view\": [], \"viewModel\": null });\n            this.expanded = new ojkeyset_1.ExpandAllKeySet();\n            this.prodDataProvider = new ArrayTreeDataProvider([]);\n            this.dataProvider = ko.observable(this.prodDataProvider);\n            this.filterVal = ko.observable(\"\");\n            this.noGroupingNumberConverter = new ojconverter_number_1.IntlNumberConverter({\n                style: \"decimal\",\n                minimumIntegerDigits: 1,\n                minimumFractionDigits: 0,\n                maximumFractionDigits: 0,\n                useGrouping: false,\n            });\n            this.effectiveDate = this.args.routerState.detail.effectiveDate;\n            this.cartProdItems = this.args.routerState.detail.cartData;\n            this.productCatalogue = this.args.routerState.detail.prodData;\n            if (0 === this.productCatalogue().length) {\n                this.prepareListData(data_json_1.default);\n            }\n            this.prodDataProvider = new ArrayTreeDataProvider(this.productCatalogue, {\n                keyAttributes: \"sku\",\n                childrenAttribute: \"products\"\n            });\n            this.dataProvider(this.prodDataProvider);\n            this.itemCount = ko.pureComputed(() => {\n                return this.cartProdItems().reduce((previous, current) => { return previous + current.inCartCount(); }, 0);\n            });\n        }\n        connected() {\n            AccUtils.announce(\"Order page loaded.\");\n        }\n        disconnected() {\n        }\n        transitionCompleted() {\n            this.adjustContentPadding();\n        }\n        adjustContentPadding() {\n            let topElem = document.getElementsByClassName(\"oj-applayout-fixed-top\")[0];\n            let contentElem = document.getElementsByClassName(\"oj-web-applayout-content\")[0];\n            let bottomElem = document.getElementsByClassName(\"oj-applayout-fixed-bottom\")[0];\n            if (topElem) {\n                contentElem.style.paddingTop = `${topElem.offsetHeight}px`;\n            }\n            if (bottomElem) {\n                contentElem.style.paddingBottom = `${bottomElem.offsetHeight}px`;\n            }\n        }\n        flattenJSON(data) {\n            let productModel = ojmodel_1.Model.extend({ idAttribute: \"sku\" });\n            let collection = new ojmodel_1.Collection(undefined, { \"model\": productModel });\n            for (let categorySet of data) {\n                for (let product of categorySet.products) {\n                    collection.add(product);\n                }\n            }\n            return collection;\n        }\n        nameFilter(model, attr, value) {\n            let name = model.get(\"name\");\n            return (name.toLowerCase().indexOf(value.toLowerCase()) > -1);\n        }\n        fadeIn(element, duration) {\n            if (!element) {\n                return;\n            }\n            (function increment(value = 0) {\n                element.style.opacity = String(value);\n                if (element.style.opacity !== '1') {\n                    setTimeout(() => {\n                        increment(value + 0.1);\n                    }, duration / 10);\n                }\n                else {\n                    element.classList.remove('hide');\n                }\n            })();\n        }\n        ;\n        fadeOut(element, duration) {\n            if (!element) {\n                return;\n            }\n            (function decrement() {\n                let _opacity = Number(element.style.opacity) - 0.1;\n                element.style.opacity = String(_opacity);\n                _opacity < 0 ? element.classList.add('hide') : setTimeout(() => {\n                    decrement();\n                }, duration / 10);\n            })();\n        }\n        ;\n        itemOnly(context) {\n            return context['leaf'];\n        }\n        ;\n    }\n    return OrderViewModel;\n});\n"],"names":["require","exports","Object","defineProperty","value","announce","validAriaLiveValues","message","manner","undefined","indexOf","params","document","getElementById","dispatchEvent","CustomEvent","ProductCategory","constructor","category","this","sku","products","add","item","push","k2","k","desc","getOwnPropertyDescriptor","m","__esModule","writable","configurable","enumerable","get","o","__setModuleDefault","create","v","__importStar","mod","result","prototype","hasOwnProperty","call","__createBinding","__importDefault","ko","ojconverter_number_1","ojmodel_1","ojkeyset_1","ArrayTreeDataProvider","CollectionDataProvider","AccUtils","interfaces_1","data_json_1","Product","productData","name","flavour","quantity","unit","packSize","volumePoints","mrp","price15","price25","price35","price42","price50","inCartCount","observable","args","handleInputNumber","event","data","detail","cartProdItems","remove","key","handleRawValueChanged","filter","length","dataProvider","filteredDataProvider","prodDataProvider","collection","flattenJSON","productCatalogue","filteredCollection","clone","ret","where","comparator","nameFilter","reset","addToCart","context","checkout","router","go","path","prepareListData","response","effectiveDate","tempArray","categorySet","items","productSet","product","emptyCart","removeAll","forEach","prod","headerConfig","footerConfig","expanded","ExpandAllKeySet","filterVal","noGroupingNumberConverter","IntlNumberConverter","style","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","useGrouping","routerState","cartData","prodData","default","keyAttributes","childrenAttribute","itemCount","pureComputed","reduce","previous","current","connected","disconnected","transitionCompleted","adjustContentPadding","topElem","getElementsByClassName","contentElem","bottomElem","paddingTop","offsetHeight","paddingBottom","productModel","Model","extend","idAttribute","Collection","model","attr","toLowerCase","fadeIn","element","duration","increment","opacity","String","setTimeout","classList","fadeOut","decrement","_opacity","Number","itemOnly"],"sourceRoot":""}